@model BlogSystem.Web.ViewModels.Comments.CommentViewModel

<h5>Leave a Comment</h5>

@if (User.Identity.IsAuthenticated)
{
    using (Ajax.BeginForm("Create", "Comments",
        new { id = ViewData["id"] },
        new AjaxOptions
        {
            HttpMethod = "Post",
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "comments",
            OnFailure = "BlogSystem.onCreateCommentFailure",
            OnSuccess = "BlogSystem.onAddCommentSuccess"
        }))
    {
        @Html.AntiForgeryToken()

        @Html.ValidationSummary(true, string.Empty, new { @class = "text-danger" })
        @Html.HiddenFor(model => model.Id)

        <div class="form-group">
            @Html.EditorFor(model => model.Content, new { htmlAttributes = new { @class = "form-control " } })
            @Html.ValidationMessageFor(model => model.Content, string.Empty, new { @class = "text-danger" })
        </div>

        <button type="submit" class="btn btn-lg btn-success">Add Comment</button>
    }
}
else
{
    <p>Only registered users can comment.</p>
}